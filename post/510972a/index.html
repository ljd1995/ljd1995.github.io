<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>M1 MAC安装ubuntu系统的另一个选择-Multipass | 岁月随心，终会淡然</title><meta name="keywords" content="linux"><meta name="author" content="Jackless"><meta name="copyright" content="Jackless"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="缘起   今年Apple发布了新款搭载M1 Pro和M1 Max芯片的Macbook Pro，看着那屏幕甚是喜欢，性能也是爆炸。由于自己用了快2年的豆子峡谷黑苹果，貌似是CPU硅脂没了，温度动不动100℃，导致系统自动死机或重启，于是果断换成了丐版标配的M1 Pro Macbook。别说，新版Mac真的香! 由于M1芯片基于ARM，所以一些软件或虚拟机都得搞成ARM的，试过Parallels De">
<meta property="og:type" content="article">
<meta property="og:title" content="M1 MAC安装ubuntu系统的另一个选择-Multipass">
<meta property="og:url" content="https://jackless.cf/post/510972a/index.html">
<meta property="og:site_name" content="岁月随心，终会淡然">
<meta property="og:description" content="缘起   今年Apple发布了新款搭载M1 Pro和M1 Max芯片的Macbook Pro，看着那屏幕甚是喜欢，性能也是爆炸。由于自己用了快2年的豆子峡谷黑苹果，貌似是CPU硅脂没了，温度动不动100℃，导致系统自动死机或重启，于是果断换成了丐版标配的M1 Pro Macbook。别说，新版Mac真的香! 由于M1芯片基于ARM，所以一些软件或虚拟机都得搞成ARM的，试过Parallels De">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://img.jackless.cf/202111212149492.jpg">
<meta property="article:published_time" content="2021-11-23T07:00:01.000Z">
<meta property="article:modified_time" content="2021-11-23T07:58:06.119Z">
<meta property="article:author" content="Jackless">
<meta property="article:tag" content="linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://img.jackless.cf/202111212149492.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://jackless.cf/post/510972a/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="UkjYb9NMX_wE4Ru7aoFPU0qyez5BO-9tH058yHpmBVc"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?e51a57dc19008056321e7b3d7fcd560a";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Jackless","link":"链接: ","source":"来源: 岁月随心，终会淡然","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'M1 MAC安装ubuntu系统的另一个选择-Multipass',
  isPost: true,
  isHome: false,
  isHighlightShrink: undefined,
  isToc: false,
  postUpdate: '2021-11-23 15:58:06'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/l-lin/font-awesome-animation/dist/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.min.css" media="defer" onload="this.media='all'"><script async src="https://cdn.jsdelivr.net/npm/hexo-butterfly-tag-plugins-plus@latest/lib/carousel-touch.min.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="岁月随心，终会淡然" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.jackless.cf/202111211217351.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">4</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/message/"><i class="fa-fw fas fa-list"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('http://img.jackless.cf/202111212149492.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">岁月随心，终会淡然</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/message/"><i class="fa-fw fas fa-list"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">M1 MAC安装ubuntu系统的另一个选择-Multipass</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-11-23T07:00:01.000Z" title="发表于 2021-11-23 15:00:01">2021-11-23</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-11-23T07:58:06.119Z" title="更新于 2021-11-23 15:58:06">2021-11-23</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%88%86%E4%BA%AB/">分享</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">1.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>7分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="M1 MAC安装ubuntu系统的另一个选择-Multipass"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/post/510972a/#post-comment"><span class="waline-comment-count" id="/post/510972a/"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><div class="note primary modern"><p>缘起</p>
</div>

<p>今年Apple发布了新款搭载M1 Pro和M1 Max芯片的Macbook Pro，看着那屏幕甚是喜欢，性能也是爆炸。由于自己用了快2年的豆子峡谷黑苹果，貌似是CPU硅脂没了，温度动不动100℃，导致系统自动死机或重启，于是果断换成了丐版标配的M1 Pro Macbook。别说，新版Mac真的香!</p>
<p>由于M1芯片基于ARM，所以一些软件或虚拟机都得搞成ARM的，试过Parallels Desktop,搞起来不是很方便，巧合的突然想起以前下载Ubuntu server镜像时看到Multipass工具，它可以快速的初始化一个Linux系统，于是搜索了下发现Multipass工具已支持ARM运行Linux。so,开干！</p>
<div class="note info modern"><p>Multipass官网介绍</p>
</div>

<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/canonical/multipass">Multipass</a> is a lightweight VM manager for Linux, Windows and macOS. It’s designed for developers who want a fresh Ubuntu environment with a single command. It uses KVM on Linux, Hyper-V on Windows and HyperKit on macOS to run the VM with minimal overhead. It can also use VirtualBox on Windows and macOS. Multipass will fetch images for you and keep them up to date.</p>
<p>Since it supports metadata for cloud-init, you can simulate a small cloud deployment on your laptop or workstation.</p>
<p>简单点说，该工具是一个虚拟机管理器，它在 Linux 上使用 KVM，在 Windows 上使用 Hyper-V，在 macOS 上使用 HyperKit 以最小的开销运行 VM，有点类似Docker</p>
<div class="note success modern"><p>安装</p>
</div>

<p><strong>Linux</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo snap install multipass</span><br></pre></td></tr></table></figure>

<p><strong>Mac</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install --cask multipass</span><br></pre></td></tr></table></figure>

<div class="note default modern"><p>使用</p>
</div>

<blockquote>
<p>快速启动一个VM</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ multipass launch --name <span class="built_in">test</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>具体配置内存、CPU、磁盘、系统版本来启动VM</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ multipass launch -n <span class="built_in">test</span>  -c 2 -m 2G -d 20G 20.04</span><br></pre></td></tr></table></figure>

<blockquote>
<p>查看multipass具体支持什么系统</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ multipass find</span><br><span class="line">Image                       Aliases           Version          Description</span><br><span class="line">18.04                       bionic            20211122         Ubuntu 18.04 LTS</span><br><span class="line">20.04                       focal,lts         20211118         Ubuntu 20.04 LTS</span><br><span class="line">21.04                       hirsute           20211119         Ubuntu 21.04</span><br><span class="line">21.10                       impish            20211103         Ubuntu 21.10</span><br><span class="line">anbox-cloud-appliance                         latest           Anbox Cloud Appliance</span><br><span class="line">minikube                                      latest           minikube is <span class="built_in">local</span> Kubernetes</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这里可以看到multipass还能安装minikube,这样来说快速初始化一个K8s单机实例是如此简单</p>
<blockquote>
<p>查看启动的虚拟机列表</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ multipass list</span><br><span class="line">Name                    State             IPv4             Image</span><br><span class="line"><span class="built_in">test</span>                    Running           192.168.64.2     Ubuntu 20.04 LTS</span><br></pre></td></tr></table></figure>

<blockquote>
<p>查看某个虚拟机具体信息</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ multipass info <span class="built_in">test</span></span><br><span class="line">Name:           <span class="built_in">test</span></span><br><span class="line">State:          Running</span><br><span class="line">IPv4:           192.168.64.2</span><br><span class="line">Release:        Ubuntu 20.04.3 LTS</span><br><span class="line">Image <span class="built_in">hash</span>:     e9271036efcd (Ubuntu 20.04 LTS)</span><br><span class="line">Load:           0.00 0.00 0.00</span><br><span class="line">Disk usage:     1.2G out of 19.2G</span><br><span class="line">Memory usage:   154.8M out of 1.9G</span><br><span class="line">Mounts:         --</span><br></pre></td></tr></table></figure>

<blockquote>
<p>外部执行虚拟机内部命令</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ multipass <span class="built_in">exec</span> <span class="built_in">test</span> -- df -h</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">udev            957M     0  957M   0% /dev</span><br><span class="line">tmpfs           198M  1.1M  197M   1% /run</span><br><span class="line">/dev/sda1        20G  1.3G   18G   7% /</span><br><span class="line">tmpfs           990M     0  990M   0% /dev/shm</span><br><span class="line">tmpfs           5.0M     0  5.0M   0% /run/lock</span><br><span class="line">tmpfs           990M     0  990M   0% /sys/fs/cgroup</span><br><span class="line">/dev/loop0       58M   58M     0 100% /snap/core20/1244</span><br><span class="line">/dev/sda15       98M  290K   98M   1% /boot/efi</span><br><span class="line">/dev/loop1       61M   61M     0 100% /snap/lxd/21843</span><br><span class="line">/dev/loop2       29M   29M     0 100% /snap/snapd/13643</span><br><span class="line">tmpfs           198M     0  198M   0% /run/user/1000</span><br></pre></td></tr></table></figure>

<p>看，这语法是不是很像k8s kubectl连接pod语法</p>
<blockquote>
<p>连接到正在运行的实例‎</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">$ multipass shell <span class="built_in">test</span></span><br><span class="line">Welcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.4.0-90-generic aarch64)</span><br><span class="line"></span><br><span class="line"> * Documentation:  https://help.ubuntu.com</span><br><span class="line"> * Management:     https://landscape.canonical.com</span><br><span class="line"> * Support:        https://ubuntu.com/advantage</span><br><span class="line"></span><br><span class="line">  System information as of Tue Nov 23 15:32:09 CST 2021</span><br><span class="line"></span><br><span class="line">  System load:             0.0</span><br><span class="line">  Usage of /:              6.4% of 19.22GB</span><br><span class="line">  Memory usage:            10%</span><br><span class="line">  Swap usage:              0%</span><br><span class="line">  Processes:               112</span><br><span class="line">  Users logged <span class="keyword">in</span>:         0</span><br><span class="line">  IPv4 address <span class="keyword">for</span> enp0s1: 192.168.64.2</span><br><span class="line">  IPv6 address <span class="keyword">for</span> enp0s1: fd0a:c754:c0d:703c:5054:ff:febd:2caa</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">0 updates can be applied immediately.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Last login: Tue Nov 23 15:29:51 2021 from 192.168.64.1</span><br><span class="line">ubuntu@<span class="built_in">test</span>:~$</span><br></pre></td></tr></table></figure>

<blockquote>
<p>停止VM</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ multipass stop <span class="built_in">test</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>启动VM</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ multipass start <span class="built_in">test</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>删除VM(只是进入DELETED状态)</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ multipass delete <span class="built_in">test</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>完全删除VM</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ multipass purge</span><br></pre></td></tr></table></figure>

<blockquote>
<p>更多语法</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">$ multipass <span class="built_in">help</span></span><br><span class="line">Usage: multipass [options] &lt;<span class="built_in">command</span>&gt;</span><br><span class="line">Create, control and connect to Ubuntu instances.</span><br><span class="line"></span><br><span class="line">This is a <span class="built_in">command</span> line utility <span class="keyword">for</span> multipass, a</span><br><span class="line">service that manages Ubuntu instances.</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -h, --<span class="built_in">help</span>     Displays <span class="built_in">help</span> on commandline options.</span><br><span class="line">  --help-all     Displays <span class="built_in">help</span> including Qt specific options.</span><br><span class="line">  -v, --verbose  Increase logging verbosity. Repeat the <span class="string">&#x27;v&#x27;</span> <span class="keyword">in</span> the short option</span><br><span class="line">                 <span class="keyword">for</span> more detail. Maximum verbosity is obtained with 4 (or more)</span><br><span class="line">                 v<span class="string">&#x27;s, i.e. -vvvv.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Available commands:</span></span><br><span class="line"><span class="string">  alias     Create an alias</span></span><br><span class="line"><span class="string">  aliases   List available aliases</span></span><br><span class="line"><span class="string">  delete    Delete instances</span></span><br><span class="line"><span class="string">  exec      Run a command on an instance</span></span><br><span class="line"><span class="string">  find      Display available images to create instances from</span></span><br><span class="line"><span class="string">  get       Get a configuration setting</span></span><br><span class="line"><span class="string">  help      Display help about a command</span></span><br><span class="line"><span class="string">  info      Display information about instances</span></span><br><span class="line"><span class="string">  launch    Create and start an Ubuntu instance</span></span><br><span class="line"><span class="string">  list      List all available instances</span></span><br><span class="line"><span class="string">  mount     Mount a local directory in the instance</span></span><br><span class="line"><span class="string">  networks  List available network interfaces</span></span><br><span class="line"><span class="string">  purge     Purge all deleted instances permanently</span></span><br><span class="line"><span class="string">  recover   Recover deleted instances</span></span><br><span class="line"><span class="string">  restart   Restart instances</span></span><br><span class="line"><span class="string">  set       Set a configuration setting</span></span><br><span class="line"><span class="string">  shell     Open a shell on a running instance</span></span><br><span class="line"><span class="string">  start     Start instances</span></span><br><span class="line"><span class="string">  stop      Stop running instances</span></span><br><span class="line"><span class="string">  suspend   Suspend running instances</span></span><br><span class="line"><span class="string">  transfer  Transfer files between the host and instances</span></span><br><span class="line"><span class="string">  umount    Unmount a directory from an instance</span></span><br><span class="line"><span class="string">  unalias   Remove an alias</span></span><br><span class="line"><span class="string">  version   Show version details</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">$ multipass launch -h</span><br><span class="line">Usage: multipass launch [options] [[&lt;remote:&gt;]&lt;image&gt; | &lt;url&gt;]</span><br><span class="line">Create and start a new instance.</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -h, --<span class="built_in">help</span>           Displays <span class="built_in">help</span> on commandline options.</span><br><span class="line">  --help-all           Displays <span class="built_in">help</span> including Qt specific options.</span><br><span class="line">  -v, --verbose        Increase logging verbosity. Repeat the <span class="string">&#x27;v&#x27;</span> <span class="keyword">in</span> the short</span><br><span class="line">                       option <span class="keyword">for</span> more detail. Maximum verbosity is obtained</span><br><span class="line">                       with 4 (or more) v<span class="string">&#x27;s, i.e. -vvvv.</span></span><br><span class="line"><span class="string">  -c, --cpus &lt;cpus&gt;    Number of CPUs to allocate.</span></span><br><span class="line"><span class="string">                       Minimum: 1, default: 1.</span></span><br><span class="line"><span class="string">  -d, --disk &lt;disk&gt;    Disk space to allocate. Positive integers, in bytes, or</span></span><br><span class="line"><span class="string">                       with K, M, G suffix.</span></span><br><span class="line"><span class="string">                       Minimum: 512M, default: 5G.</span></span><br><span class="line"><span class="string">  -m, --mem &lt;mem&gt;      Amount of memory to allocate. Positive integers, in</span></span><br><span class="line"><span class="string">                       bytes, or with K, M, G suffix.</span></span><br><span class="line"><span class="string">                       Minimum: 128M, default: 1G.</span></span><br><span class="line"><span class="string">  -n, --name &lt;name&gt;    Name for the instance. If it is &#x27;</span>primary<span class="string">&#x27; (the</span></span><br><span class="line"><span class="string">                       configured primary instance name), the user&#x27;</span>s home</span><br><span class="line">                       directory is mounted inside the newly launched instance,</span><br><span class="line">                       <span class="keyword">in</span> <span class="string">&#x27;Home&#x27;</span>.</span><br><span class="line">  --cloud-init &lt;file&gt;  Path to a user-data cloud-init configuration, or <span class="string">&#x27;-&#x27;</span> <span class="keyword">for</span></span><br><span class="line">                       stdin</span><br><span class="line">  --network &lt;spec&gt;     Add a network interface to the instance, <span class="built_in">where</span> &lt;spec&gt; is</span><br><span class="line">                       <span class="keyword">in</span> the <span class="string">&quot;key=value,key=value&quot;</span> format, with the following</span><br><span class="line">                       keys available:</span><br><span class="line">                        name: the network to connect to (required), use the</span><br><span class="line">                       networks <span class="built_in">command</span> <span class="keyword">for</span> a list of possible values, or use</span><br><span class="line">                       <span class="string">&#x27;bridged&#x27;</span> to use the interface configured via `multipass</span><br><span class="line">                       <span class="built_in">set</span> local.bridged-network`.</span><br><span class="line">                        mode: auto|manual (default: auto)</span><br><span class="line">                        mac: hardware address (default: random).</span><br><span class="line">                       You can also use a shortcut of <span class="string">&quot;&lt;name&gt;&quot;</span> to mean</span><br><span class="line">                       <span class="string">&quot;name=&lt;name&gt;&quot;</span>.</span><br><span class="line">  --bridged            Adds one `--network bridged` network.</span><br><span class="line">  --timeout &lt;timeout&gt;  Maximum time, <span class="keyword">in</span> seconds, to <span class="built_in">wait</span> <span class="keyword">for</span> the <span class="built_in">command</span> to</span><br><span class="line">                       complete. Note that some background operations may</span><br><span class="line">                       <span class="built_in">continue</span> beyond that. By default, instance startup and</span><br><span class="line">                       initialization is limited to 5 minutes each.</span><br><span class="line"></span><br><span class="line">Arguments:</span><br><span class="line">  image                Optional image to launch. If omitted, <span class="keyword">then</span> the default</span><br><span class="line">                       Ubuntu LTS will be used.</span><br><span class="line">                       &lt;remote&gt; can be either ‘release’ or ‘daily‘. If &lt;remote&gt;</span><br><span class="line">                       is omitted, ‘release’ will be used.</span><br><span class="line">                       &lt;image&gt; can be a partial image <span class="built_in">hash</span> or an Ubuntu release</span><br><span class="line">                       version, codename or <span class="built_in">alias</span>.</span><br><span class="line">                       &lt;url&gt; is a custom image URL that is <span class="keyword">in</span> http://, https://,</span><br><span class="line">                       or file:// format.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<div class="note warning modern"><p>拓展</p>
</div>

<blockquote>
<p>SSH连接multipass启动的VM</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">multipass shell <span class="built_in">test</span></span><br><span class="line">sudo -i <span class="comment"># 切到root用户</span></span><br><span class="line">vim /etc/ssh/sshd_config</span><br><span class="line">将PasswordAuthentication no修改为</span><br><span class="line">PasswordAuthentication yes</span><br><span class="line">将PermitRootLogin prohibit-password修改为</span><br><span class="line">PermitRootLogin yes</span><br><span class="line">重启ssh</span><br><span class="line">service ssh restart</span><br><span class="line">现在就可以愉快的ssh登录了</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined" rel="external nofollow noreferrer">Jackless</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://jackless.cf/post/510972a/">https://jackless.cf/post/510972a/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://jackless.cf" target="_blank">岁月随心，终会淡然</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/linux/">linux</a></div><div class="post_share"><div class="social-share" data-image="http://img.jackless.cf/202111212149492.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/post/e4dbd1fc/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.jackless.cf/202111212149494.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">模拟saltstack/ansible系列一（序言）</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/post/50c5b9ad/" title="博客撰写计划"><img class="cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.jackless.cf/202111212149493.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-11-21</div><div class="title">博客撰写计划</div></div></a></div><div><a href="/post/e4dbd1fc/" title="模拟saltstack/ansible系列一（序言）"><img class="cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.jackless.cf/202111212149494.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-11-22</div><div class="title">模拟saltstack/ansible系列一（序言）</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.jackless.cf/202111211217351.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Jackless</div><div class="author-info__description">分享技术，记录生活</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">4</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/ljd1995"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/ljd1995" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:ljd19950912@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/post/510972a/" title="M1 MAC安装ubuntu系统的另一个选择-Multipass"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.jackless.cf/202111212149492.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="M1 MAC安装ubuntu系统的另一个选择-Multipass"/></a><div class="content"><a class="title" href="/post/510972a/" title="M1 MAC安装ubuntu系统的另一个选择-Multipass">M1 MAC安装ubuntu系统的另一个选择-Multipass</a><time datetime="2021-11-23T07:00:01.000Z" title="发表于 2021-11-23 15:00:01">2021-11-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/e4dbd1fc/" title="模拟saltstack/ansible系列一（序言）"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.jackless.cf/202111212149494.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="模拟saltstack/ansible系列一（序言）"/></a><div class="content"><a class="title" href="/post/e4dbd1fc/" title="模拟saltstack/ansible系列一（序言）">模拟saltstack/ansible系列一（序言）</a><time datetime="2021-11-22T13:12:52.000Z" title="发表于 2021-11-22 21:12:52">2021-11-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/50c5b9ad/" title="博客撰写计划"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.jackless.cf/202111212149493.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="博客撰写计划"/></a><div class="content"><a class="title" href="/post/50c5b9ad/" title="博客撰写计划">博客撰写计划</a><time datetime="2021-11-21T11:26:37.000Z" title="发表于 2021-11-21 19:26:37">2021-11-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/4a17b156/" title="Hello World"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="http://img.jackless.cf/202111212149492.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hello World"/></a><div class="content"><a class="title" href="/post/4a17b156/" title="Hello World">Hello World</a><time datetime="2021-11-18T11:26:37.000Z" title="发表于 2021-11-18 19:26:37">2021-11-18</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('http://img.jackless.cf/202111212149492.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2021 By Jackless</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function loadWaline () {
  function initWaline () {
    const waline = new Waline(Object.assign({
      el: '#waline-wrap',
      serverURL: 'https://blog-comment-js38sj1b8-jackless.vercel.app',
      avatar: 'monsterid',
      avatarCDN: 'https://seccdn.libravatar.org/avatar/',
      path: location.pathname,
      visitor: true,
      dark: 'html[data-theme="dark"]'
    }, {"placeholder":"欢迎评论，请文明发言","highlight":true,"login":"disable","meta":["nick","mail","link"],"requiredMeta":["nick","mail"],"dark":true}))
  }

  if (typeof Waline === 'function') initWaline() 
  else getScript('https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js').then(initWaline)
}

if ('Waline' === 'Waline' || !false) {
  if (false) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
  else setTimeout(loadWaline, 0)
} else {
  function loadOtherComment () {
    loadWaline()
  }
}</script></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>function history_calendar_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = '<div class="card-widget card-history"><div class="card-content"><div class="item-headline"><i class="fas fa-clock fa-spin"></i><span>那年今日</span></div><div id="history-baidu" style="height: 100px;overflow: hidden"><div class="history_swiper-container" id="history-container" style="width: 100%;height: 100%"><div class="swiper-wrapper" id="history_container_wrapper" style="height:20px"></div></div></div></div>';
                console.log('已挂载history_calendar')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // 有报错，但不影响使用(支持pjax跳转)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='/'|| '/' ==='all')){

            history_calendar_injector_config()
        } </script><script data-pjax  src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/js/main.js"></script><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><!-- hexo injector body_end end --></body></html>